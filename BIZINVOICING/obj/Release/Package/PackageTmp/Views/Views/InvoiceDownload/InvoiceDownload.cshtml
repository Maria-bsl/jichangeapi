@model BL.BIZINVOICING.BusinessEntities.Common.InvoicePDfData
@using System.Globalization;

@{
    ViewBag.Title = "Invoice";
    Layout = "~/Views/Shared/_Invoice_layout.cshtml";
}


<div class="pcoded-content">
    <div class="pcoded-inner-content">
        <!-- Main-body start -->
        <div class="main-body">
            <div class="page-wrapper">
                <!-- Page body start -->
                @* <div class="page-body"> *@
                    <!-- Container-fluid starts -->
                    @* <div class="row container card"> *@
                        <!-- Main content starts -->
                        @* <div> *@

                            <!-- Invoice card start -->
                            <div class="card">
                                <div class="row invoice-contact">
                                    <div class="col-md-8">
                                        <div class="invoice-box row">
                                            <div class="col-sm-12">
                                                <table class="table table-responsive invoice-table table-borderless">
                                                    <tbody>
                                                        <tr>
                                                            <td><img src="../assets/images/efd-logo.png" class=""
                                                                    alt="" width="100" height="100">
                                                                <span>@Html.DisplayFor(Model => Model.CompName)</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><span id="Date"> @ViewBag.Date</span></td>
                                                        </tr>
                                                        <tr>
                                                            <td>P.O.BOX  @Html.DisplayFor(Model => Model.CompPostBox)</td>
                                                        </tr>
                                                        <tr>
                                                            <td>@Html.DisplayFor(Model => Model.CompAddress)</td>
                                                        </tr>
                                                        <tr>
                                                            <td> Tel:  @Html.DisplayFor(Model => Model.CompTelNo),
                                                                FAX: @Html.DisplayFor(Model => Model.CompTelNo),
                                                                Mob: @Html.DisplayFor(Model => Model.CompMobNo)
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td> Email:<a href="mailto:demo@gmail.com" target="_top">
                                                                    @Html.DisplayFor(Model => Model.CompEmail)</a>
                                                            </td>
                                                        </tr>
                                                         <tr>
                                                            <td>VATNo:@Html.DisplayFor(Model => Model.CompVatNo) &nbsp; &nbsp; <span> TIN No: @Html.DisplayFor(Model => Model.TinNo)</span> </td>
                                                        </tr>
                                                        <tr>
                                                            <td><h4></h4> </td>
                                                        </tr>
                                                        <tr>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="row text-center">
                                            <div class="col-sm-6 invoice-btn-group" id="sigfile">
                                                <form id="frmDayDownLoad" target="_blank" action="@Url.Action("TRAPDFDOWnload", "InvoiceDownload" , new { id = ViewBag.Id })" method="post">
                                                    
                                                    <span>
                                                        <input type="submit" value="Get Signature" id="btnEventDownload" class="btn btn-warning waves-effect waves-light m-b-10 download-submit" /> </span>
                                                        
                                                        @* <button type="button"
                                                            class="">Get
                                                            Signature
                                                        </button> *@
                                                </form>
                                            </div>
                                            <div class="col-sm-6 invoice-btn-group" id="wpdf">
                                                <form id="frmDayDownLoads" target="_blank" action="@Url.Action("InvoicePDFDownload", "InvoiceDownload" , new { id = ViewBag.Id })" method="post">
                                                    <span>
                                                        @* <button type="button" id=""
                                                         class="btn btn-primary btn-print-invoice
                                                          waves-effect waves-light
                                                         m-r-20 m-b-10">Download 
                                                         PDF</button> *@
                                                        
                                                         <span>
                                                            <input type="submit" value="Download PDF" id="btnEventDownloadsss generatePDF" class="btn btn-primary btn-print-invoice waves-effect waves-light m-r-20 m-b-10 download-submit" />
                                                        </span>

                                                </form>
                                        </div>      
                                    </div>
                                </div>
                                <div class="card-block">
                                    <div class="row invoice-info">
                                        <div class="col-md-4 col-xs-12 invoice-client-info pad-box">
                                            <h6>Customer Information </h6>
                                            <table
                                                class="table table-responsive invoice-table invoice-order table-borderless">
                                                <tbody>
                                                    <tr>
                                                        <th>Customer Name :</th>
                                                        <td>@Html.DisplayFor(Model => Model.Cust_Name)</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Contact Person :</th>
                                                        <td>
                                                            @Html.DisplayFor(Model => Model.ConPerson)
                                                        </td>
                                                    </tr>
                                                    @* <tr>
                                                        <th>Tel / FAX / Mobile :</th>
                                                        <td>
                                                          </td>
                                                    </tr> *@
                                                    @* <tr>
                                                        <th>Email :</th>
                                                        <td>
                                                            
                                                        </td>
                                                    </tr> *@
                                                    @* <tr>
                                                        <th>P.O.BOX / Address : </th>
                                                        <td>
                                                             </td>
                                                    </tr> *@

                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-4 col-sm-6">
                                            <h6>Address</h6>
                                            <table
                                                class="table table-responsive invoice-table invoice-order table-borderless">
                                                <tbody>
                                                    <tr>
                                                        <th>P O Box :</th>
                                                        <td>@Html.DisplayFor(Model => Model.CustomerPostboxNo) @Html.DisplayFor(Model => Model.CustAddress)</td>
                                                    </tr>
                                                    @* <tr>
                                                        <th>Status :</th>
                                                        <td>
                                                            <span class="label label-warning">Pending</span>
                                                        </td>
                                                    </tr> *@
                                                    <tr>
                                                        <th>Email :</th>
                                                        <td>
                                                            @* #145698 *@
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-4 col-sm-6">
                                            <h6>Contact </h6>
                                            <table
                                                class="table table-responsive invoice-table invoice-order table-borderless">
                                                <tbody>
                                                    <tr>
                                                        <th>Tel / FAX / Mobile :</th>
                                                        <td>  @Html.DisplayFor(Model => Model.CustPhone)</td>
                                                    </tr>
                                                    @* <tr>
                                                        <th>VAT No :</th>
                                                        <td>
                                                            12
                                                        </td>
                                                    </tr> *@
                                                    @* <tr>
                                                        <th>TIN No :</th>
                                                        <td>
                                                            145698
                                                        </td>
                                                    </tr> *@
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-10 pad-box">
                                            <div class="table-responsive">
                                                <table class="table  invoice-detail-table">
                                                    <thead>
                                                        <tr class="thead-default">
                                                            <th>Item / Description</th>
                                                            <th>Quantity</th>
                                                            <th>Unit Price  @Html.DisplayFor(Model => Model.Currency_Code)</th>
                                                            <th> VAT %</th>
                                                            <th>Total Amount @Html.DisplayFor(Model => Model.Currency_Code)</th>
                                                            <th>Remarks</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>  
                                                            @foreach (var item in Model.InvoiceItemlist)
                                                            {
                                                                <tr>
                                                                    <td>
                                                                        <h6>@item.Item_Description</h6>
                                                                        @* <p>Lorem ipsum dolor sit amet </p> *@
                                                                    </td>
                                                                    <td>@item.Item_Qty</td>
                                                                    <td>@String.Format(new CultureInfo("en-US"), "{0:C0}", item.Item_Unit_Price).Replace("$", "")</td>
                                                                    <td>10</td>
                                                                    <td>@String.Format(new CultureInfo("en-US"), "{0:C0}", item.Item_Qty * item.Item_Unit_Price).Replace("$", "")</td>
                                                                    <td>@item.Remarks</td>
                                                                </tr>
                                                            }
                                                                @* <tr>
                                                                    <td>
                                                                        <h6>template Design</h6>
                                                                        <p>Lorem ipsum dolor sit</p>
                                                                    </td>
                                                                    <td>7</td>
                                                                    <td>1000.00</td>
                                                                    <td>11</td>
                                                                    <td>20222</td>
                                                                    <td>Paid</td>
                                                                </tr> *@
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-10 pad-box">
                                            <div class="">
                                                <table class="table invoice-table invoice-total table-responsive">
                                                    <tbody>
                                                        <tr>
                                                            <th>VAT Amount</th>
                                                            <td>@String.Format(new CultureInfo("en-US"), "{0:C0}", Model.Vat_Amount).Replace("$", "")</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Without VAT </th>
                                                            <td>@String.Format(new CultureInfo("en-US"), "{0:C0}", Model.Total_Without_Vt).Replace("$", "")</td>
                                                        </tr>
                                                        <tr class="text-info">
                                                            <td>
                                                                <hr>
                                                                <h5 class="text-primary">Total :</h5>
                                                            </td>
                                                            <td>
                                                                <hr>
                                                                <h5 class="text-primary">@String.Format(new CultureInfo("en-US"), "{0:C0}",  Model.Item_Total_Amount).Replace("$", "")</h5>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row ">
                                        <div class="col-sm-10 pad-box">
                                            <table class="table table-bordered table-responsive">
                                                <thead>
                                                    <tr>
                                                        <th>Amount in words </th>
                                                        <th>Payment Term </th>
                                                        <th>Warrenty </th>
                                                        <th> Delivery Status </th>
                                                        <th> Good Status </th>
                                                        <th> Other remarks if any </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>@Html.DisplayFor(Model => Model.Currency_Code):@Html.DisplayFor(Model => Model.AmountWords) only.</td>
                                                        <td>@Html.DisplayFor(Model => Model.BankName)  AccNO:@Html.DisplayFor(Model => Model.AccountNo) @Html.DisplayFor(Model => Model.CompName) </td>
                                                        <td>@Html.DisplayFor(Model => Model.warrenty)</td>
                                                        <td>@Html.DisplayFor(Model => Model.delivery_status)</td>
                                                        <td>@Html.DisplayFor(Model => Model.goods_status)</td>
                                                        <td></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-10 pad-box">
                                            @* <div class=""> *@
                                                <table class="table table-bordered table-responsive">
                                                    <tbody>
                                                        <th>PAPERS PROCESSED BY
                                                        <td> Name : @Html.DisplayFor(Model => Model.CompContactPerson)</td>
                                                        <td> Designation : Director</td>
                                                        <td> Signature : ............</td>
                                                        </th>
                                                    </tbody>

                                                    <tbody>
                                                        <th>ORDER ACCEPTANCE BY CUSTOMER
                                                        <td>Name : Ana Michael</td>
                                                        <td>Date : 22/10/2021</td>
                                                        <td>Signature : .........</td>
                                                        <td> Company Stamp & Seal :</td>
                                                        </th>
                                                    </tbody>
                                                </table>
                                            @* </div> *@
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 text-center">
                                            <p> Biz Logic Solutions LTD  <span> Complete 'IT' Solutions</span> </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Invoice card end -->
                        

<script>
    jQuery(document).ready(function () {
        //debugger;
        if (@ViewBag.result == 18) {

            alert("Device Changed ");
        }
        if (@ViewBag.result == 8) {

            alert("Device Blocked ");
        }
        if (@ViewBag.result == 2) {

            alert("Sending TRA API is Failed !! Please contact admin ");
        }
    });


    var invoicestatus = @Model.approval_status;
    console.log(invoicestatus);
    //debugger
    if (invoicestatus == 2 && invoicestatus!= '0') {
        //debugger
        $("#dowloadfile").show();
        $("#sigfile").hide();

    }
    else {
        $("#dowloadfile").hide();
        $("#sigfile").show();
    }


    //jQuery("#btnEventDownload").click(function () {
    //    debugger;

    //     window.location = "/Invoice/Invoice/";

    //});
</script>

<script type="text/javascript">
    var doc = new jsPDF();
    var specialElementHandlers = {
        '#editor': function (element, renderer) {
            return true;
        }
    };


    $('#generatePDF').click(function () {
        doc.fromHTML($('#htmlContent').html(), 15, 15, {
            'width': 700,
            'elementHandlers': specialElementHandlers
        });
        doc.save('sample_file.pdf');
    });
</script>

