@model BL.BIZINVOICING.BusinessEntities.Common.InvoicePDfData
@using System.Globalization;

@{
    ViewBag.Title = "Invoice";
    Layout = "~/Views/Shared/_Invoice_layout.cshtml";
}

<div class="pcoded-content">
    <div class="pcoded-inner-content">
        <!-- Main-body start -->
        <div class="main-body">
            <div class="page-wrapper">

<div class="row container card ">

    <div class="custom_table container-fluid" id="divFilter" style="display:block;">
        <div class="custom_form">
            <div class="select_dropdown custom_form">
                <div class="business_search">

                    <div class="row">

                        @*  <div id="excel">

                            <form id="frmDayDownLoad" target="_blank" action="Url.Action(" GetDownloadGrowerandInventoryDetails", "DownloadData" , new { area="WebPortal" })" method="post">
                                <input type="hidden" id="dwnDistributor" name="dwnDistributor" value="" />
                                <input type="hidden" id="dwnExtract" name="dwnExtract" value="" />
                                <input type="hidden" id="dwnExtracttype" name="dwnExtracttype" value="" />
                                <input type="hidden" id="dwnFromDate" name="dwnFromDate" value="" />
                                <input type="hidden" id="dwnToDate" name="dwnToDate" value="" />
                                <div class="business_search row">
                                    <div class=" btn greybtn green_btn" style="margin-left: 78%;background-color: green;margin: auto;" ">
                                        <span class="download_icon download-submit-icon"><i class="fa fa-download" aria-hidden="true"></i></span>
                                        <span>
                                            <input type="submit" value="DOWNLOAD" id="btnEventDownload" class="download-submit" />
                                        </span>
                                    </div>
                                </div>
                            </form>
                        </div>
                        *@

                    </div>

                </div>
            </div>

        </div>

        <div class="row">

            <table  style="width:100%">

                <tr>
                    <td>
                        @Html.DisplayFor(Model => Model.CompName)&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
                        <span id="Date"> @ViewBag.Date</span>
                    </td>
                    <td>
                        <img src="/images/bizlogiclogo.png" alt="Sample Photo" width="100" height="100" />
                    </td>
                </tr>
                <tr>
                    <td>PObox: @Html.DisplayFor(Model => Model.CompPostBox)</td>

                </tr>
                <tr>
                    <td>@Html.DisplayFor(Model => Model.CompAddress)</td>

                </tr>
                <tr>
                    <td>Tele: @Html.DisplayFor(Model => Model.CompTelNo) FAX: @Html.DisplayFor(Model => Model.CompTelNo) Mob:  @Html.DisplayFor(Model => Model.CompMobNo) </td>

                </tr>
                <tr>
                    <td>Email: @Html.DisplayFor(Model => Model.CompEmail)	 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span>Invoice NO: @Html.DisplayFor(Model => Model.Invoice_No)</span></td>

                </tr>
                <tr>
                    <td>VATNo:@Html.DisplayFor(Model => Model.CompVatNo) &nbsp; &nbsp; <span> TIN No: @Html.DisplayFor(Model => Model.TinNo)</span> </td>



                </tr>

                <tr>


                    <td><h4 style="padding-left: 53%"> TAX Invoice</h4> </td>

                </tr>

            </table>
            <table class="table table-sm no-wrap table-responsive" style="border: 1px solid black; border-collapse: collapse;">
                <tr>

                    <td></td>
                    <td><b style="padding-left: 6%"> To    </b> </td>

                </tr>
                <tr>

                    <td style="padding-right: 10%;text-align: right;border: 1px solid black;"> Customer Name: @Html.DisplayFor(Model => Model.Cust_Name)</td>

                    <td style="text-align: center; border: 1px solid black;"> Tele/Fax/mobile/: @Html.DisplayFor(Model => Model.CustPhone)  </td>

                </tr>
                <tr>

                    <td style="padding-right: 10%;text-align: right;border: 1px solid black;"> Contact Person:@Html.DisplayFor(Model => Model.ConPerson)</td>

                    <td style="text-align: center; border: 1px solid black;"> Pobox/Address :  @Html.DisplayFor(Model => Model.CustomerPostboxNo) @Html.DisplayFor(Model => Model.CustAddress)  </td>
                </tr>

                <tr style="background-color:black">
                    <td style="padding:1%"></td>
                    <td style="padding:1%"></td>
                </tr>
                <tr>
                    <table style="border: 1px solid black; border-collapse: collapse;">
                        <tr>
                            <th style="text-align: center; border: 1px solid black;">Quantity</th>
                            <th style="text-align: center; border: 1px solid black;">Item/Description</th>
                            <th style="text-align: center; border: 1px solid black;">UNIT Price @Html.DisplayFor(Model => Model.Currency_Code)</th>
                            <th style="text-align: center; border: 1px solid black;">Total Amount @Html.DisplayFor(Model => Model.Currency_Code)</th>
                            <th style="text-align: center; border: 1px solid black;">Remarks</th>

                        </tr>
                                @foreach (var item in Model.InvoiceItemlist)
                                {
                                    <tr>
                                        <td style="text-align: right; border: 1px solid black;">@item.Item_Qty</td>
                                        <td style="text-align: right; border: 1px solid black;">@item.Item_Description</td>
                                        <td style="text-align: right; border: 1px solid black;">@String.Format(new CultureInfo("en-US"), "{0:C0}", item.Item_Unit_Price).Replace("$", "")</td>
                                        <td style="text-align: right; border: 1px solid black;">@String.Format(new CultureInfo("en-US"), "{0:C0}", item.Item_Qty * item.Item_Unit_Price).Replace("$", "")</td>
                                        <td style="text-align: right; border: 1px solid black;">@item.Remarks</td>


                                    </tr>
                                }

                        @*<tr>
                            <td style="text-align: center; border: 1px solid black;">LS</td>
                            <td style="text-align: center; border: 1px solid black;">Part of RFB MIS Maitaince for 2016</td>
                            <td style="text-align: center; border: 1px solid black;">3,000</td>
                            <td style="text-align: center; border: 1px solid black;">3,000</td>
                            <td style="text-align: center; border: 1px solid black;"></td>


                        </tr>*@

                        @*<tr>
                            <td style="text-align: center; border: 1px solid black;">LS</td>
                            <td style="text-align: center; border: 1px solid black;">Part of RFB MIS Maitaince for 2016</td>
                            <td style="text-align: center; border: 1px solid black;">3,000</td>
                            <td style="text-align: center; border: 1px solid black;">3,000</td>
                            <td style="text-align: center; border: 1px solid black;"></td>


                        </tr>*@

                        <tr>
                            <td style="text-align: right; border: 1px solid black;" colspan="3">
                                Without VAT Amount:
                            </td>
                            <td style="text-align: right; border: 1px solid black;">@String.Format(new CultureInfo("en-US"), "{0:C0}", Model.Total_Without_Vt).Replace("$", "")   </td>
                            <td style="text-align: right; border: 1px solid black;"></td>

                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;" colspan="3">VAT Amount:</td>
                            <td style="text-align: right; border: 1px solid black;">@String.Format(new CultureInfo("en-US"), "{0:C0}", Model.Vat_Amount).Replace("$", "")</td>
                            <td style="text-align: center; border: 1px solid black;"></td>

                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;" colspan="3">Total Amount:</td>
                            <td style="text-align: right; border: 1px solid black;"> @String.Format(new CultureInfo("en-US"), "{0:C0}",  Model.Item_Total_Amount).Replace("$", "")</td>
                            <td style="text-align: center; border: 1px solid black;"></td>

                        </tr>
                        @*<tr>
                            <td style="text-align: right; border: 1px solid black;" colspan="3"></td>
                            <td style="text-align: center; border: 1px solid black;"></td>
                            <td style="text-align: center; border: 1px solid black;"></td>

                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;" colspan="3"></td>
                            <td style="text-align: center; border: 1px solid black;"></td>
                            <td style="text-align: center; border: 1px solid black;"></td>

                        </tr>*@

                        <tr>
                            <td style="text-align: left; border: 1px solid black;" colspan="5"> Amount In Words:@Html.DisplayFor(Model => Model.Currency_Code):@Html.DisplayFor(Model => Model.AmountWords) Only.</td>


                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;">Payment Term:</td>
                            <td style="text-align: left; border: 1px solid black; " colspan="4">@Html.DisplayFor(Model => Model.BankName)  AccNO:@Html.DisplayFor(Model => Model.AccountNo) @Html.DisplayFor(Model => Model.CompName)</td>

                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;">Warrenty:</td>
                            <td style="text-align: left; border: 1px solid black; " colspan="4">@Html.DisplayFor(Model => Model.warrenty)</td>

                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;">Goods Status:</td>
                            <td style="text-align: left; border: 1px solid black; " colspan="4">@Html.DisplayFor(Model => Model.goods_status)</td>

                        </tr>
                        <tr>
                            <td style="text-align: right; border: 1px solid black;">Delivery Status:</td>
                            <td style="text-align: left; border: 1px solid black; " colspan="4">@Html.DisplayFor(Model => Model.delivery_status)</td>

                        </tr>

                        <tr>
                            <th style="text-align: right; border: 1px solid black;" rowspan="2">Other Remarks IF Any:</th>
                            <td style="text-align: left; border: 1px solid black; " colspan="4"> </td>

                        </tr>
                        <tr>
                            <td style="text-align: left; border: 1px solid black; " rowspan="2" colspan="4"> </td>

                        </tr>


                    </table>
                </tr>
            </table>



        </div>
       

        <div class="row">
            <table style="width:100%;border: 1px solid black;">

                <tr>
                    <td>
                        PAPERS PROCESSED BY
                    </td>
                    <td>
                        ORDER ACCEPTENCE BY CUSTOMER
                    </td>

                </tr>

                <tr>
                    <td style="border: 1px solid black;" rowspan="2">
                        <div>Name: @Html.DisplayFor(Model => Model.CompContactPerson)</div>
                        <div>Designation: Director</div>
                        <div></div>

                        <div></div>
                        <div>SIGNATURE:</div>
                    </td>
                    <td style="text-align: left; border: 1px solid black; " colspan="4">


                        <div>Name:   </div>
                        <div>Sig & Date: </div>
                        <div></div>

                        <div></div>
                        <div>Company stamp & seal:   </div>
                    </td>

                </tr>
                @*<tr>
                    <td>
                        Biz Logic
                    </td>
                    <td>
                      complete It
                    </td>

                </tr>*@
            </table>

        </div>

        <div class="row">
            <table style="width:100%;border: 1px solid black;">

                <tr>
                    <td>
                        Biz Logic
                    </td>
                    <td>
                        complete 'IT' Solutions
                    </td>

                </tr>


            </table>

        </div>
        @*<div class="row">
            <table style="width:100%;border: 1px solid black;">

                <tr>
                    <td>
                        Biz Logic
                    </td>
                </tr>
            </table>

        </div>*@
        <div class="row">
            <div class="row" id="sigfile">

                <form id="frmDayDownLoad" target="_blank" action="@Url.Action("TRAPDFDOWnload", "InvoiceDownload" , new { id = ViewBag.Id })" method="post">
                    <div class="business_search row" style="padding-top: 10%; padding-left: 328%;">
                        <div class="btn greybtn green_btn" style="margin-left: 78%;background-color:  #28a745;margin: auto;">
                            <span class="download_icon download-submit-icon"><i class="fa fa-download" aria-hidden="true"></i></span>
                            <span>
                                <input type="submit" value="Get Signature" id="btnEventDownload" class="download-submit" />
                            </span>
                        </div>
                    </div>
                </form>

            </div>
            <div class="row" id="dowloadfile">
                @*<form id="frmDayDownLoad" target="_blank" action="@Url.Action("TRAPDFDOWnload", "InvoiceDownload" , new { id = ViewBag.Id })" method="post">
                    <div class="business_search row" style="padding-top: 10%; padding-left: 328%;">
                        <div class=" btn greybtn green_btn" style="margin-left: 78%;background-color: green;margin: auto;">
                            <span class="download_icon download-submit-icon"><i class="fa fa-download" aria-hidden="true"></i></span>
                            <span>
                                <input type="submit" value="Download Invoice" id="btnEventDownload" class="download-submit" />
                            </span>
                        </div>
                    </div>
                </form>*@

            </div>

            <div class="row" id="wpdf" style="margin-left: -33%; margin-top: 0%;">
                <form id="frmDayDownLoads" target="_blank" action="@Url.Action("InvoicePDFDownload", "InvoiceDownload" , new { id = ViewBag.Id })" method="post">
                    <div class="business_search row" style="padding-top: 10%; padding-left: 328%;">
                        <div class=" btn greybtn green_btn" style="margin-left: 78%;background-color: #6c757d;margin: auto;">
                            <span class="download_icon download-submit-icon"><i class="icofont icofont-download-alt"></i></span>
                            <span>
                                <input type="submit" value="Download PDF" id="btnEventDownloadsss" class="download-submit" />
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>

    </div>
<script>
    jQuery(document).ready(function () {
        //debugger;
        if (@ViewBag.result == 18) {

            alert("Device Changed ");
        }
        if (@ViewBag.result == 8) {

            alert("Device Blocked ");
        }
        if (@ViewBag.result == 2) {

            alert("Sending TRA API is Failed !! Please contact admin ");
        }
    });


    var invoicestatus = @Model.approval_status;
    console.log(invoicestatus);
    //debugger
    if (invoicestatus == 2 && invoicestatus!= '0') {
        //debugger
        $("#dowloadfile").show();
        $("#sigfile").hide();

    }
    else {
        $("#dowloadfile").hide();
        $("#sigfile").show();
    }


    //jQuery("#btnEventDownload").click(function () {
    //    debugger;

    //     window.location = "/Invoice/Invoice/";

    //});
</script>